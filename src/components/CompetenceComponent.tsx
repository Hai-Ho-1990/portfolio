import React, { useEffect, useState } from 'react';

const techIcons = [
  {
    name: 'github',
    paths: [
      'M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5',
    ],
  },
  {
    name: 'typescript',
    custom: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-label="TypeScript"
        role="img"
        viewBox="0 0 512 512"
        width="30"
        height="30"
        className="shrink-0"
      >
        <rect width="512" height="512" rx="15%" fill="#3178c6" />
        <path
          fill="#ffffff"
          d="m233 284h64v-41H118v41h64v183h51zm84 173c8.1 4.2 18 7.3 29 9.4s23 3.1 35 3.1
           c12 0 23-1.1 34-3.4c11-2.3 20-6.1 28-11c8.1-5.3 15-12 19-21s7.1-19 7.1-32
           c0-9.1-1.4-17-4.1-24s-6.6-13-12-18c-5.1-5.3-11-10-18-14s-15-8.2-24-12
           c-6.6-2.7-12-5.3-18-7.9c-5.2-2.6-9.7-5.2-13-7.8c-3.7-2.7-6.5-5.5-8.5-8.4
           c-2-3-3-6.3-3-10c0-3.4.89-6.5 2.7-9.3s4.3-5.1 7.5-7.1c3.2-2 7.2-3.5 12-4.6
           c4.7-1.1 9.9-1.6 16-1.6c4.2 0 8.6.31 13 .94c4.6.63 9.3 1.6 14 2.9
           c4.7 1.3 9.3 2.9 14 4.9c4.4 2 8.5 4.3 12 6.9v-47c-7.6-2.9-16-5.1-25-6.5
           s-19-2.1-31-2.1c-12 0-23 1.3-34 3.8s-20 6.5-28 12c-8.1 5.4-14 12-19 21
           c-4.7 8.4-7 18-7 30c0 15 4.3 28 13 38c8.6 11 22 19 39 27c6.9 2.8 13 5.6
           19 8.3s11 5.5 15 8.4c4.3 2.9 7.7 6.1 10 9.5c2.5 3.4 3.8 7.4 3.8 12
           c0 3.2-.78 6.2-2.3 9s-3.9 5.2-7.1 7.2s-7.1 3.6-12 4.8c-4.7 1.1-10 1.7-17 1.7
           c-11 0-22-1.9-32-5.7c-11-3.8-21-9.5-28.1-15.44z"
        />
      </svg>
    ),
  },

  {
    name: 'react',
    custom: (
      <svg
        viewBox="0 0 64 64"
        xmlns="http://www.w3.org/2000/svg"
        aria-label="React"
        role="img"
        className="w-8 h-8"
      >
        <circle cx="32.001" cy="31.955" r="4.478" fill="#00a5c2" />
        <path
          fill="#00a5c2"
          d="M32.33 22.516c7.635.052 15.965.609 21.683 5.708.168.15.33.306.488.467 1.349 1.375 2.054 3.595.965 5.422-2.234 3.751-7.23 5.387-12.067 6.394-7.234 1.506-14.798 1.518-22.029.192-4.161-.764-8.416-2.103-11.373-4.904-1.151-1.09-2.135-2.524-1.981-4.12.25-2.582 2.727-4.239 4.812-5.361 5.791-3.116 12.847-3.813 19.502-3.798zM31.776 23.689c-7.224.049-15.043.51-20.621 5.129a9.26 9.26 0 0 0-.564.507 7.11 7.11 0 0 0-.339.355c-.979 1.1-1.316 2.867-.392 4.188.93 1.329 2.342 2.288 3.796 3.07 5.438 2.924 11.864 3.443 18.129 3.465 6.343.023 12.884-.555 18.487-3.452 2.232-1.155 4.744-2.851 4.655-5.035-.082-2.004-2.036-3.242-3.499-4.126a22.19 22.19 0 0 0-1.216-.668c-5.562-2.787-12.08-3.447-18.436-3.433z"
        />
        <path
          fill="#00a5c2"
          d="M42.115 10.703c2.793.071 4.24 3.429 4.431 5.909.038.493.052.988.046 1.483a23.3 23.3 0 0 1-.082 1.606c-.589 6.612-3.608 12.909-7.163 18.724-3.477 5.688-7.717 11.36-13.485 13.996-1.907.872-4.175 1.41-5.863.437-2.314-1.333-2.567-4.451-2.524-6.816.011-.581.049-1.162.109-1.741.889-8.56 5.228-16.669 10.658-23.655 3.168-4.076 6.937-8.119 11.632-9.583.739-.231 1.326-.371 2.241-.36zM41.981 11.875c-3.279.052-6.223 2.482-8.83 5.007-6.854 6.637-11.905 15.464-13.937 24.721a30.34 30.34 0 0 0-.386 2.166 20.92 20.92 0 0 0-.159 1.697c-.023.452-.031.905-.017 1.358.01.354.033.708.072 1.06.029.269.068.537.117.803.037.197.08.393.13.588.041.158.087.315.139.471.409 1.233 1.463 2.411 2.878 2.45 3.301.09 6.409-2.317 9.096-4.933 4.717-4.591 8.232-10.36 10.978-16.424 2.216-4.896 4.243-10.218 3.111-15.607a7.57 7.57 0 0 0-.308-1.089c-.44-1.199-1.475-2.271-2.884-2.268z"
        />
        <path
          fill="#00a5c2"
          d="M22.109 10.747c3.564.069 6.765 2.488 9.607 5.197 5.186 4.943 9.011 11.231 11.913 17.849 2.248 5.127 4.316 10.882 2.478 16.292-.579 1.705-2.044 3.265-3.997 3.305-3.581.072-6.9-2.532-9.78-5.335-7.225-7.034-12.589-16.32-14.427-26.168a26.5 26.5 0 0 1-.309-2.127 25.4 25.4 0 0 1-.106-1.752 18.53 18.53 0 0 1 .035-1.414 15.82 15.82 0 0 1 .255-1.808c.539-1.843 1.941-3.485 4.185-3.471zM21.974 11.92c-2.087.046-3.042 2.507-3.234 4.234a15.62 15.62 0 0 0-.074 1.068c-.014.456-.008.913.015 1.369.328 6.599 3.278 12.979 6.838 18.821 3.352 5.5 7.4 10.978 12.968 13.794 1.608.813 3.562 1.452 4.951.684 1.742-.964 1.956-3.261 2.049-4.973a21.05 21.05 0 0 0-.12-3.154c-.642-5.437-3.05-10.582-5.816-15.444-3.442-6.048-7.659-12.076-13.627-15.225a12.6 12.6 0 0 0-3.95-1.174z"
        />
      </svg>
    ),
  },

  {
    name: 'javascript',
    custom: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-label="JavaScript"
        role="img"
        viewBox="0 0 512 512"
        width="30"
        height="30"
        className="shrink-0"
      >
        <rect width="512" height="512" rx="15%" fill="#f7df1e" />
        <path
          d="M324 370c10 17 24 29 47 29c20 0 33-10 33-24c0-16 -13-22 -35-32l-12-5
           c-35-15 -58-33 -58-72c0-36 27-64 70-64c31 0 53 11 68 39l-37 24c-8-15
           -17-21 -31-21c-14 0-23 9 -23 21c0 14 9 20 30 29l12 5c41 18 64 35 64
           76c0 43-34 67-80 67c-45 0-74 -21 -88 -49zm-170 4c8 13 14 25 31 25c16
           0 26-6 26-30V203h48v164c0 50-29 72-72 72c-39 0-61-20-72-44z"
          fill="#000"
        />
      </svg>
    ),
  },

  {
    name: 'vue',
    custom: (
      <svg
        viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        className="shrink-0"
      >
        <path d="M2 4L16 28L30 4H24.5L16 18.5L7.5 4H2Z" fill="#41B883" />
        <path d="M7.5 4L16 18.5L24.5 4H19.5L16.0653 10.0126L12.5 4H7.5Z" fill="#35495E" />
      </svg>
    ),
  },

  {
    name: 'openai',
    paths: [
      'M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35',
      'M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946',
      'M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348',
      'M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45',
      'M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946',
      'M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42',
    ],
  },
  {
    name: 'tailwind',
    custom: (
      <svg
        viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        className="shrink-0"
      >
        <path
          d="M9,13.7q1.4-5.6,7-5.6c5.6,0,6.3,4.2,9.1,4.9q2.8.7,4.9-2.1-1.4,5.6-7,5.6c-5.6,0-6.3-4.2-9.1-4.9Q11.1,10.9,9,13.7ZM2,22.1q1.4-5.6,7-5.6c5.6,0,6.3,4.2,9.1,4.9q2.8.7,4.9-2.1-1.4,5.6-7,5.6c-5.6,0-6.3-4.2-9.1-4.9Q4.1,19.3,2,22.1Z"
          fill="#44a8b3"
        />
      </svg>
    ),
  },

  {
    name: 'figma',
    custom: (
      <svg
        viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        className="shrink-0"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M16 16C16 13.7909 17.7909 12 20 12C22.2091 12 24 13.7909 24 16C24 18.2091 22.2091 20 20 20C17.7909 20 16 18.2091 16 16Z"
          fill="#1ABCFE"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 24C8 21.7909 9.79086 20 12 20H16V24C16 26.2091 14.2091 28 12 28C9.79086 28 8 26.2091 8 24Z"
          fill="#0ACF83"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M16 4V12H20C22.2091 12 24 10.2091 24 8C24 5.79086 22.2091 4 20 4H16Z"
          fill="#FF7262"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 8C8 10.2091 9.79086 12 12 12H16V4H12C9.79086 4 8 5.79086 8 8Z"
          fill="#F24E1E"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 16C8 18.2091 9.79086 20 12 20H16V12H12C9.79086 12 8 13.7909 8 16Z"
          fill="#A259FF"
        />
      </svg>
    ),
  },
];

export default function CompetenceComponent(): JSX.Element {
  const [filledIcons, setFilledIcons] = useState<typeof techIcons>([]);

  useEffect(() => {
    const fillIcons = () => {
      const baseCount = techIcons.length;
      const iconWidth = 60; // ungefÃ¤r ikonens bredd + gap
      const screenWidth = window.innerWidth;
      const repeats = Math.ceil((screenWidth * 2) / (baseCount * iconWidth));
      const newIcons = Array.from({ length: repeats }, () => techIcons).flat();
      setFilledIcons(newIcons);
    };

    fillIcons();
    window.addEventListener('resize', fillIcons);
    return () => window.removeEventListener('resize', fillIcons);
  }, []);

  return (
    <section className="techStack-section  bg-[#f8f9fa] py-6 overflow-hidden">
      <div className="scroll-container">
        <div className="scroll-content items-center">
          {filledIcons.map((icon, index) => (
            <div key={`${icon.name}-${index}`} className="shrink-0">
              {icon.custom ? (
                icon.custom
              ) : (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth="1.25"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  className={`icon icon-tabler icon-tabler-brand-${icon.name} shrink-0`}
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  {icon.paths?.map((pathData, i) => (
                    <path key={i} d={pathData} />
                  ))}
                </svg>
              )}
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
